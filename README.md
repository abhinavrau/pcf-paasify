# PCF Paasify

Paasify is a set of super-opinionated Terraform scripts and supporting utilities for creating PCF installations in the various supported IaaS providers. This is mainly intended for demo, testing or PoC setups where the installer has complete control.

Some of the opinions of this project are:

- A very specific DNS naming convention and control structure (see below for more details)
- SSL certificates generated through LetsEncrypt

The core of the functionality is provided by the Pivotal-authored Terraform configuration files. These projects are imported as Terraform modules and pinned to specific versions to help ensure long-term compatibility.

The main features provided by the install are:

- Small Footprint PAS
- Several tiles pre-installed with reduced VM footprint
- DNS that is configured without intervention
- Valid SSL certificates for both OpsManager and PAS
- Working configuration for `cf logs` and `cf ssh`
- AWS Service Catalog configurations that provide CodeBuild job templates
- All default passwords are randomly generated

## Usage

There are several ways to run Paasify.

### Running with Terraform

Paasify can be run directly as a Terraform module. For example, the following example leverages GCP:

```
module "paasify" {
  source = "github.com/nthomson-pivotal/pcf-paasify/terraform/gcp"

  env_name     = "my-paasify-env"
  project      = "gcp-project-name"
  dns_suffix   = "gcp.paasify.org"
  pivnet_token = "<pivnet token>"
}
```

Currently the implementation only allows authentication already configured appropriately on the host machine. Explicitly passing in credentials for the various Terraform cloud providers is not supported.

### Running as AWS Service Catalog

TODO

## Reference

The following sections provide more detailed information regarding the system which is created by the scripts

### Tiles Installed

These tiles are installed by default:

- MySQL v2
- RabbitMQ
- Spring Cloud Services
- PCF Metrics
- Metrics Forwarder
- Healthwatch

The latest stemcell supported by each tile will automatically be uploaded to OpsManager.

### DNS

TODO

### SSL Certificates

Valid SSL certificates are generated by using Lets Encrypt via the DNS challenge protocol. If the DNS is setup as documented above then this will work transparently and will require no further input.

A single SSL certificate is generated for all necessary SANs, which results in several wildcard entries.